<ng-container *ngIf="ready; else loading">
  <form (ngSubmit)="onSubmit()" class="form-v3 filledColor formBlock">
    <div class="formGroup">
      <div class="grpInfo">
        <div class="title" i18n>Preferences</div>
        <div class="textBox sm">
          <p i18n>
            This sections requires you to select your learning preferences.
          </p>
        </div>
      </div>
      <div class="inputBox">
        <div class="input-field normal full">
          <label for="preferencesQ" i18n>Select your learning preferences</label>

          <div class="checkboxWrap col2">
            <label *ngFor="let option of learningPreferencesOptions">
              <input 
                type="checkbox" 
                [checked]="isPreferenceChecked(option.value)"
                (change)="onPreferenceChange(option.value, $event)"
              />
              <span>{{ option.label }}</span>
            </label>
          </div>
        </div>
      </div>
    </div>

    <div class="formGroup">
      <div class="inputBox">
        <div class="input-field normal full buttonWrap">
          <button type="button" class="more wAuto gray" (click)="goBack()">
            <span i18n>Previous</span>
          </button>
          <button type="submit" class="more wAuto" [disabled]="isSubmitting">
            <span i18n>Next</span>
          </button>
        </div>
      </div>
    </div>
  </form>
</ng-container>

<ng-template #loading>
  <div class="flex flex-grow justify-center items-center py-8">
    <p-progressSpinner></p-progressSpinner>
  </div>
</ng-template>
