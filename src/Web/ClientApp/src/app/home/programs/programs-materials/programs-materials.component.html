<div class="card border rounded-lg border-gray-400  bg-white p-4">
  <div class="inline-flex items-center mb-8 cursor-pointer contents" (click)="goBack()">
    <img src="assets/images/ico-arrow-left.svg" class="w-6 h-6" alt="" />
    <p class="text-lg ml-2 text-gray-700" i18n>
      Back to Programs
    </p>
  </div>
  <p-tabView (onChange)="handleChange($event)">
    <p-tabPanel header="Modules" i18n-header>
      <div class="pb-4">
        <h1 class="text-2xl text-gray-700 mb-4" i18n>
          {{ programName }}
        </h1>
        <div
          *ngIf="ready && !isInstructorOrAdmin"
          class="mb-8 p-4 pr-32 border border-gray-300 rounded-lg grid grid-cols-12 gap-4 items-center"
        >
          <p-progressBar
            class="progress-bar col-span-7"
            [value]="completed"
            [showValue]="false"
          ></p-progressBar>
          <div>
            <span>{{ completed }}</span>
            <span class="text-lg col-span-3 text-gray-800 font-semibold" i18n>% Completed</span>
          </div>
        </div>
        <div *ngIf="ready; else loading" class="grid grid-cols-1 gap-4 sm:grid-cols-3">
          <app-materials-card
            *ngFor="let item of modulesData"
            [isInstructor]="isInstructorOrAdmin"
            [completed]="item.completed"
            [name]="item.name"
            [name_AR]="item.name_AR"
            [order]="item.order"
            [materialUrl]="item.id"
            [duration]="item.duration"
            [startDate]="item.startDate"
            [description]="item.description"
            [location]="item.cohortName"
          >
          </app-materials-card>
        </div>
      </div>
      <ng-template #loading>
        <app-progress-spinner></app-progress-spinner>
      </ng-template>
    </p-tabPanel>
    <p-tabPanel header="Projects" i18n-header *ngIf="!isInstructorOrAdmin">
      <p-tabView (onChange)="handleChangeProjects($event)">
        <p-tabPanel header="In Progress Projects" i18n-header>
          <div *ngIf="ready; else loadingInProgress" class="grid gap-4">
            <app-leadership-projects
              *ngFor="let item of moduleProgram"
              [id]="item.id"
              [caption]="item.topic"
              [status]="item.projectStatus"
              [endDate]="item.endDate"
              [content]="item.description"
            >
            </app-leadership-projects>
          </div>
          <ng-template #loadingInProgress>
            <app-progress-spinner></app-progress-spinner>
          </ng-template>
        </p-tabPanel>
        <p-tabPanel header="Completed Projects" i18n-header>
          <div *ngIf="ready; else loadingCompleted" class="grid gap-4">
            <app-leadership-projects
              *ngFor="let item of completedProgram"
              [id]="item.id"
              [caption]="item.topic"
              [status]="item.projectStatus"
              [endDate]="item.endDate"
              [content]="item.description"
            >
            </app-leadership-projects>
          </div>
          <ng-template #loadingCompleted>
            <app-progress-spinner></app-progress-spinner>
          </ng-template>
        </p-tabPanel>
        <p-tabPanel header="Group Projects" i18n-header>
          <div *ngIf="ready; else loadingGrouped" class="grid gap-4">
            <app-leadership-projects
              *ngFor="let item of groupedProgram"
              [id]="item.id"
              [caption]="item.topic"
              [status]="item.projectStatus"
              [endDate]="item.endDate"
              [content]="item.description"
              [isGrouped]="true"
            >
            </app-leadership-projects>
          </div>
          <ng-template #loadingGrouped>
            <app-progress-spinner></app-progress-spinner>
          </ng-template>
        </p-tabPanel>
      </p-tabView>
    </p-tabPanel>
    <p-tabPanel header="Program Evaluation" i18n-header *ngIf="!isInstructorOrAdmin">
      <div class="grid gap-6">
        <div *ngIf="ready; else loading" class="grid gap-4">
          <div *ngIf="surveysData.length === 0; else listOfSurveys">
            <p class="text-center" i18n>No Surveys yet!</p>
          </div>
          <ng-template #listOfSurveys>
            <app-survey-card
              *ngFor="let survey of surveysData"
              [name]="survey.name"
              [templateName]="survey.surveyTemplateName"
              [url]="survey.surveyURL"
            ></app-survey-card>
          </ng-template>
        </div>
        <ng-template #loading>
          <app-progress-spinner></app-progress-spinner>
        </ng-template>
      </div>
    </p-tabPanel>
  </p-tabView>
</div>
