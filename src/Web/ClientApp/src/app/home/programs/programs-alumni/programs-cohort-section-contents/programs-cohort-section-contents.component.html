<div *ngIf="ready; else loading" class="mt-4 border rounded-lg border-gray-400  bg-white p-4">
  <div class="inline-flex items-center mb-8 cursor-pointer contents" (click)="goBack()">
    <img src="assets/images/ico-arrow-left.svg" class="w-6 h-6" alt="" />
    <p class="backSections text-lg ml-2" i18n>
      Back to Sections
    </p>
  </div>
  <div *ngIf="!isExistSections; else sections" class="mt-12">
    <p class="text-sm text-center text-gray-700" i18n>No SECTIONS Added</p>
  </div>
  <ng-template #sections>
    <p-tabView class="sectionTabs" [(activeIndex)]="activeIndex" (onChange)="handleChange($event)">
      <p-tabPanel *ngFor="let item of allSections" [header]="item.order">
        <div *ngIf="contentReady" class="flex justify-between my-2">
          <div *ngIf="isInstructor">
            <a [href]="'/'+ locale + generatedURL + '/edit'">
              <p-button label="Add Content" i18n-label></p-button>
            </a>
          </div>
        </div>
      </p-tabPanel>
    </p-tabView>
    <div *ngIf="contentReady; else loadingContent">
      <div class="grid gap-8">
        <div class="flex flex-col sm:items-center sm:flex-row">
          <div class="w-full mt-6 sm:w-3/5 sm:ml-8 sm:mt-0">
            <p class="statusText text-gray-700 text-lg">{{ currentStatusText }}</p>
          </div>
        </div>

        <div *ngFor="let item of sectionContents" class="pb-4" [ngSwitch]="item.type">
          <div *ngSwitchCase="1">
            <app-text-content [name]="item.name" [text]="item.text"></app-text-content>
          </div>
          <div *ngSwitchCase="2">
            <app-video-content [name]="item.name" [videoUrl]="item.url"></app-video-content>
          </div>
          <div *ngSwitchCase="3">
            <app-document-content
              [name]="item.name"
              [documentUrl]="item.documentUrl"
            ></app-document-content>
          </div>
          <div *ngSwitchCase="4">
            <app-meeting-content
              [name]="item.name"
              [link]="item.url"
              [date]="item.startDate"
            ></app-meeting-content>
          </div>
        </div>
      </div>
    </div>
    <ng-template #loadingContent>
      <div class="flex flex-grow justify-center items-center py-8">
        <p-progressSpinner></p-progressSpinner>
      </div>
    </ng-template>
  </ng-template>
</div>

<ng-template #loading>
  <div class="flex flex-grow justify-center items-center py-8">
    <p-progressSpinner></p-progressSpinner>
  </div>
</ng-template>
