<ng-container *ngIf="ready; else loading">
  <h1 class="text-2xl font-bold" style="color: var(--primary-color)" i18n>Questions</h1>
  <p class="p-text-secondary" i18n>This section requires you to answer specific questions for the program.</p>
  <div class="flex justify-end py-4">
    <button pButton class="p-button-rounded" type="button" icon="pi pi-save" label="Save" i18n-label
    [disabled]="isSubmitting || !questionsForm.dirty" (click)="save(true)"></button>
  </div>
    <form [formGroup]="questionsForm" class="p-grid p-formgrid p-fluid"
      (ngSubmit)="saveAndGoToNextForm()">
     <p-card styleClass="rounded-lg bg-card-light shadow-none" >
      <div *ngFor="let question of questions" class="p-field p-col-12">
        <label [for]="question.id">{{ question.question }}</label>
        <textarea pInputTextarea [formControlName]="question.id" [id]="question.id" [autoResize]="true" maxlength="1250"
          rows="3"></textarea>
        <small appControlValidationError [controlName]="question.id" class="p-invalid"></small>
      </div>
     </p-card>
      <div class="p-col-12 flex justify-between my-8">
        <div class="w-32">
          <button pButton type="button" label="Back" i18n-label class="w-32" routerLink="../references"
            [disabled]="isSubmitting"></button>
        </div>
        <div class="w-32">
          <button pButton type="submit" label="Next" i18n-label
            [disabled]="isSubmitting || questionsForm.invalid"></button>
        </div>
      </div>
    </form>
  
</ng-container>

<ng-template #loading>
  <div class="flex flex-grow justify-center items-center py-8">
    <p-progressSpinner></p-progressSpinner>
  </div>
</ng-template>

<p-toast [preventOpenDuplicates]="true"></p-toast>
